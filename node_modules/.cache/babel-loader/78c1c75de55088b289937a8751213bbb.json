{"ast":null,"code":"import _defineProperty from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/angel/myturn/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/angel/myturn/frontend/src/components/Login.js\";\nimport React, { Component } from 'react';\nimport { login } from './UserFunctions';\nexport var emailRegex = RegExp(/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/);\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Login).call(this));\n\n    _this.onChange = function (e) {\n      e.preventDefault();\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n\n      var formErrors = _objectSpread({}, _this.state.formErrors);\n\n      switch (name) {\n        case \"email\":\n          formErrors.email = emailRegex.test(value) ? \"\" : \"invalid email address\";\n          break;\n\n        case \"password\":\n          formErrors.password = value.length < 6 ? \"minimum 6 characaters required\" : \"\";\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState({\n        formValid: true\n      });\n\n      if (formErrors.email === \"\" && formErrors.password === \"\") {\n        if (_this.state.email !== \"\" && _this.state.password !== \"\") {\n          _this.setState({\n            formValid: emailRegex.test(_this.state.email) ? false : true\n          });\n        }\n      }\n\n      _this.setState(_defineProperty({\n        formErrors: formErrors\n      }, name, value));\n    };\n\n    _this.state = {\n      email: '',\n      password: '',\n      formValid: true,\n      formErrors: {\n        email: '',\n        password: '',\n        error: ''\n      }\n    };\n    _this.onChange = _this.onChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      var formErrors = _objectSpread({}, this.state.formErrors);\n\n      var user = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      login(user).then(function (res) {\n        if (res.error) {\n          formErrors.error = res.error;\n\n          _this2.setState({\n            formErrors: formErrors\n          });\n        } else {\n          _this2.props.history.push('/');\n        }\n      }).catch(function (err) {\n        console.log(err);\n        return err;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-md-6 mt-5 mx-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        noValidate: true,\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Please sign in\"), this.state.formErrors.error !== \"\" && React.createElement(\"div\", {\n        className: \"errorMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, this.state.formErrors.error), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Email Address\"), React.createElement(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        className: \"form-control\",\n        placeholder: \"Enter email\",\n        value: this.state.email,\n        noValidate: true,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      })), this.state.formErrors.email.length > 0 && React.createElement(\"div\", {\n        className: \"errorMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.state.formErrors.email), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Password\"), React.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        className: \"form-control\",\n        placeholder: \"Enter password\",\n        value: this.state.password,\n        noValidate: true,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), this.state.formErrors.password.length > 0 && React.createElement(\"div\", {\n        className: \"errorMessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, this.state.formErrors.password), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-lg btn-primary btn-block\",\n        disabled: this.state.formValid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Sign in\")))));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport default Login;","map":{"version":3,"sources":["/home/angel/myturn/frontend/src/components/Login.js"],"names":["React","Component","login","emailRegex","RegExp","Login","onChange","e","preventDefault","target","name","value","formErrors","state","email","test","password","length","setState","formValid","error","bind","onSubmit","user","then","res","props","history","push","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {login} from './UserFunctions';\n\nexport const emailRegex = RegExp(\n    /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/\n);\n\nclass Login extends Component{\n    constructor(){\n        super()\n        this.state ={\n            email: '',\n            password: '',\n            formValid:true,\n            formErrors: {\n            email: '',\n            password: '',\n            error:''\n          }\n        };\n        this.onChange = this.onChange.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    onSubmit(e){\n        e.preventDefault();\n        let formErrors = { ...this.state.formErrors };\n\n        const user =  {\n            email: this.state.email,\n            password: this.state.password\n        }\n\n        login(user).then(res => {\n            if (res.error){\n                formErrors.error = res.error\n                this.setState({ formErrors })\n            }\n            else {\n                this.props.history.push('/')\n            }\n        })\n\n        .catch(err => {\n                console.log(err)\n                return err\n            });\n        \n        \n    }\n\n    onChange = e => {\n     e.preventDefault();\n        const { name, value } = e.target;\n        let formErrors = { ...this.state.formErrors };\n    \n        switch (name) {\n          case \"email\":\n            formErrors.email = emailRegex.test(value)\n              ? \"\"\n              : \"invalid email address\";\n            break;\n          case \"password\":\n            formErrors.password =\n              value.length < 6 ? \"minimum 6 characaters required\" : \"\";\n            break;\n          default:\n            break;\n        }\n\n        this.setState({ formValid : true})\n        \n        if ((formErrors.email===\"\")&&(formErrors.password===\"\")){\n            if ((this.state.email!==\"\")&&(this.state.password!==\"\")){\n                this.setState({\n                    formValid : emailRegex.test(this.state.email) ? false : true\n                })\n            }\n        }\n    \n        this.setState({ formErrors, [name]: value });\n      };\n\n      \n\n    render (){\n        return(\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-md-6 mt-5 mx-auto\">\n                        <form noValidate onSubmit={this.onSubmit} >\n                            <h1 className=\"h3 mb-3 font-weight-normal\">Please sign in</h1>\n                            {this.state.formErrors.error !== \"\" && ( <div className=\"errorMessage\">\n                            {this.state.formErrors.error}\n                            </div>)}\n                            <div className=\"form-group\">\n                                <label htmlFor=\"email\">Email Address</label>\n                                <input type=\"email\"\n                                name=\"email\"\n                                className= \"form-control\"\n                                placeholder=\"Enter email\"\n                                value={this.state.email}\n                                noValidate\n                                onChange={this.onChange}/>\n                            </div>\n                            {this.state.formErrors.email.length > 0 && (\n                                   <div className=\"errorMessage\">{this.state.formErrors.email}</div>\n                                )}\n                            <div className=\"form-group\">\n                                <label htmlFor=\"password\">Password</label>\n                                <input type=\"password\"\n                                name=\"password\"\n                                className= \"form-control\"\n                                placeholder=\"Enter password\"\n                                value={this.state.password}\n                                noValidate\n                                onChange={this.onChange}/>\n                            </div>\n                            {this.state.formErrors.password.length > 0 && (\n                                 <div className=\"errorMessage\">{this.state.formErrors.password}</div>\n                                )}\n                            <button type=\"submit\" className=\"btn btn-lg btn-primary btn-block\"\n                            disabled={this.state.formValid}>\n                                Sign in\n                            </button>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}